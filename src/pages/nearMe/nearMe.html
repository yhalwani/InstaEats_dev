<ion-header>

  <ion-navbar color = "rdaApp">

    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>


<ion-title>
    <img alt="logo" class={{plat.platform}} src={{plat.assetPath}}>
</ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="switchView()">
        <ion-icon name={{iconName}}></ion-icon>
      </button>
      <!-- <button ion-button icon-only (click)="openModal()">
        <ion-icon name="options"></ion-icon>
      </button> -->
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>

  <ion-searchbar [(ngModel)]="searchInput" [autocomplete]="on" [showCancelButton]="shouldShowCancel" placeholder="Search by name or type" (ionInput)="onSearch($event)"></ion-searchbar>
  <ion-refresher (ionRefresh)="doRefresh($event)"></ion-refresher>
  <div [ngSwitch]="nearMeViews">

    <!-- Map View Case -->
    <ion-list *ngSwitchCase="'mapView'" id="mapViewList">

      <!-- Map Container -->
      <sebm-google-map id="map"
      [latitude]="this.map.mapObject.lat"
      [longitude]="this.map.mapObject.lng"
      [zoom]="this.map.mapObject.zoom"
      [zoomControl]="false"
      [disableDefaultUI]="true"
      [scaleControl]="true"
      >

        <!-- user location marker -->
        <sebm-google-map-marker
        [latitude]="this.map.mapObject.lat"
        [longitude]="this.map.mapObject.lng"
        [visible]="this.map.mapObject.visible"
        [iconUrl]="this.map.mapObject.iconUrl"
        >

          <sebm-google-map-info-window>
            <strong>My location</strong>
            <br>
            {{this.map.mapObject.lat}}, {{this.map.mapObject.lng}}
          </sebm-google-map-info-window>

        </sebm-google-map-marker>

        <!-- LIVE restaurant location markers -->
        <sebm-google-map-marker *ngFor="let m of liveList"
        [latitude]="m.coordinates.lat"
        [longitude]="m.coordinates.lng"
        [iconUrl]="'https://firebasestorage.googleapis.com/v0/b/instaeats-a06a3.appspot.com/o/img%2Flivelist.png?alt=media&token=6817a0b1-03cb-41b8-b026-8f51320c9100'"
        >

          <sebm-google-map-info-window>
            <strong>{{m.restaurantName}}</strong>
            <br>
            {{m.address}}
          </sebm-google-map-info-window>

        </sebm-google-map-marker>

        <!-- DEAD restaurant location markers -->
        <sebm-google-map-marker *ngFor="let m of deadList"
        [latitude]="m.coordinates.lat"
        [longitude]="m.coordinates.lng"
        [iconUrl]="'https://firebasestorage.googleapis.com/v0/b/instaeats-a06a3.appspot.com/o/img%2Fdeadlist.png?alt=media&token=8c472e53-9f39-41c9-911d-7d6da24c7097'"
        >

          <sebm-google-map-info-window>
            <strong>{{"[OFFLINE]"}}{{m.restaurantName}} </strong>
            <br>
            {{m.address}}
          </sebm-google-map-info-window>

        </sebm-google-map-marker>

      </sebm-google-map>

    </ion-list>

    <!-- List View Case -->
    <ion-list *ngSwitchCase="'listView'">

      <ion-item-group>
        <ion-item-divider> Live Discounts </ion-item-divider>

          <ion-item class="item" *ngFor="let rest of liveList; let i = index">

            <ion-card class="card" (click)="goToRestPage('live', i)">
              <ion-card-content class="header">
                <ion-item>
                  <ion-thumbnail item-left>
                    <img class="imageborder" src="{{rest.photoUrl}}">
                  </ion-thumbnail>
                  <h3>{{rest.restaurantName}}</h3>
                  <p>{{rest.slogan}}</p>
                  <p>{{rest.description}}</p>

                  <div item-right>
                    <ion-icon *ngIf="rest.liveStatus" color="secondary" name="md-pricetags"></ion-icon>
                    <br>
                    <ion-note>{{rest.distance}}km </ion-note>
                  </div>

                </ion-item>
              </ion-card-content>
            </ion-card>
          </ion-item>

      </ion-item-group>

      <ion-item-group>
        <ion-item-divider> Earlier Discounts  </ion-item-divider>

          <ion-item class="item" *ngFor="let rest of deadList; let i = index">

            <ion-card class="card" (click)="goToRestPage('dead', i)">
              <ion-card-content class="header">
                <ion-item>
                  <ion-thumbnail item-left>
                    <img class="imageborder" src="{{rest.photoUrl}}">
                  </ion-thumbnail>
                  <h3>{{rest.restaurantName}}</h3>
                  <p>{{rest.slogan}}</p>
                  <p>{{rest.description}}</p>

                  <div item-right>
                    <ion-icon *ngIf="!rest.liveStatus" color="light" name="md-pricetags"></ion-icon>
                    <br>
                    <!-- <ion-note>{{rest.distance}}km </ion-note> -->
                  </div>

                </ion-item>
              </ion-card-content>
            </ion-card>
          </ion-item>

      </ion-item-group>

    </ion-list>

  </div>

</ion-content>
